// Generated by Haxe 3.3.0
package kha;

import haxe.root.*;

@SuppressWarnings(value={"rawtypes", "unchecked"})
public class Scheduler extends haxe.lang.HxObject
{
	static
	{
		//line 42 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.timeWarpSaveTime = 1.0;
		//line 60 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.DIF_COUNT = 3;
		//line 61 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.maxframetime = 0.5;
		//line 65 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.startTime = ((double) (((int) (0.0) )) );
		//line 67 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.activeTimeTask = null;
	}
	
	public Scheduler(haxe.lang.EmptyObject empty)
	{
	}
	
	
	public Scheduler()
	{
		//line 37 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.__hx_ctor_kha_Scheduler(this);
	}
	
	
	public static void __hx_ctor_kha_Scheduler(kha.Scheduler __temp_me79)
	{
	}
	
	
	public static haxe.root.Array<kha.TimeTask> timeTasks;
	
	public static haxe.root.Array<kha.TimeTask> pausedTimeTasks;
	
	public static haxe.root.Array<kha.TimeTask> outdatedTimeTasks;
	
	public static haxe.root.Array<kha.TimeTask> timeTasksScratchpad;
	
	public static double timeWarpSaveTime;
	
	public static haxe.root.Array<kha.FrameTask> frameTasks;
	
	public static haxe.root.Array<kha.FrameTask> toDeleteFrame;
	
	public static double current;
	
	public static double lastTime;
	
	public static boolean frame_tasks_sorted;
	
	public static boolean stopped;
	
	public static boolean vsync;
	
	public static double onedifhz;
	
	public static int currentFrameTaskId;
	
	public static int currentTimeTaskId;
	
	public static int currentGroupId;
	
	public static int DIF_COUNT;
	
	public static double maxframetime;
	
	public static haxe.root.Array<java.lang.Object> deltas;
	
	public static double startTime;
	
	public static kha.TimeTask activeTimeTask;
	
	public static void init()
	{
		//line 70 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.deltas = new haxe.root.Array<java.lang.Object>();
		//line 71 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		{
			//line 71 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			int _g1 = 0;
			//line 71 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			int _g = kha.Scheduler.DIF_COUNT;
			//line 71 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			while (( _g1 < _g ))
			{
				//line 71 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				int i = _g1++;
				//line 71 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.Scheduler.deltas.__set(i, 0);
			}
			
		}
		
		//line 73 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.stopped = true;
		//line 74 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.frame_tasks_sorted = true;
		//line 75 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.current = kha.Scheduler.realTime();
		//line 76 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.lastTime = kha.Scheduler.realTime();
		//line 78 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.currentFrameTaskId = 0;
		//line 79 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.currentTimeTaskId = 0;
		//line 80 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.currentGroupId = 0;
		//line 82 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.timeTasks = new haxe.root.Array<kha.TimeTask>(new kha.TimeTask[]{});
		//line 83 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.pausedTimeTasks = new haxe.root.Array<kha.TimeTask>(new kha.TimeTask[]{});
		//line 84 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.outdatedTimeTasks = new haxe.root.Array<kha.TimeTask>(new kha.TimeTask[]{});
		//line 85 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.timeTasksScratchpad = new haxe.root.Array<kha.TimeTask>(new kha.TimeTask[]{});
		//line 86 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.frameTasks = new haxe.root.Array<kha.FrameTask>(new kha.FrameTask[]{});
		//line 87 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.toDeleteFrame = new haxe.root.Array<kha.FrameTask>(new kha.FrameTask[]{});
	}
	
	
	public static void start(java.lang.Object restartTimers)
	{
		//line 90 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		boolean __temp_restartTimers70 = ( (haxe.lang.Runtime.eq(restartTimers, null)) ? (false) : (haxe.lang.Runtime.toBool(restartTimers)) );
		//line 91 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.vsync = kha.System.get_vsync();
		//line 92 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		int hz = kha.System.get_refreshRate();
		//line 93 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		if (( ( hz >= 57 ) && ( hz <= 63 ) )) 
		{
			//line 93 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			hz = 60;
		}
		
		//line 94 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.onedifhz = ( 1.0 / hz );
		//line 96 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.stopped = false;
		//line 97 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.resetTime();
		//line 98 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.lastTime = kha.Scheduler.realTime();
		//line 99 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		{
			//line 99 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			int _g1 = 0;
			//line 99 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			int _g = kha.Scheduler.DIF_COUNT;
			//line 99 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			while (( _g1 < _g ))
			{
				//line 99 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				int i = _g1++;
				//line 99 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.Scheduler.deltas.__set(i, 0);
			}
			
		}
		
		//line 101 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		if (__temp_restartTimers70) 
		{
			//line 102 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			{
				//line 102 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				int _g2 = 0;
				//line 102 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				haxe.root.Array<kha.TimeTask> _g11 = kha.Scheduler.timeTasks;
				//line 102 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				while (( _g2 < _g11.length ))
				{
					//line 102 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					kha.TimeTask timeTask = _g11.__get(_g2);
					//line 102 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					 ++ _g2;
					//line 103 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					timeTask.paused = false;
				}
				
			}
			
			//line 106 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			{
				//line 106 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				int _g3 = 0;
				//line 106 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				haxe.root.Array<kha.FrameTask> _g12 = kha.Scheduler.frameTasks;
				//line 106 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				while (( _g3 < _g12.length ))
				{
					//line 106 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					kha.FrameTask frameTask = _g12.__get(_g3);
					//line 106 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					 ++ _g3;
					//line 107 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					frameTask.paused = false;
				}
				
			}
			
		}
		
	}
	
	
	public static void stop()
	{
		//line 113 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.stopped = true;
	}
	
	
	public static boolean isStopped()
	{
		//line 117 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		return kha.Scheduler.stopped;
	}
	
	
	public static void warpTimeTasks(double time, haxe.root.Array<kha.TimeTask> tasks)
	{
		//line 121 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		int _g = 0;
		//line 121 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		while (( _g < tasks.length ))
		{
			//line 121 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			kha.TimeTask timeTask = tasks.__get(_g);
			//line 121 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			 ++ _g;
			//line 122 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			if (( timeTask.start >= time )) 
			{
				//line 123 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				timeTask.next = timeTask.start;
			}
			else
			{
				//line 125 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				if (( timeTask.period > 0 )) 
				{
					//line 126 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					double sinceStart = ( time - timeTask.start );
					//line 127 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					int times = ((int) (java.lang.Math.ceil(( sinceStart / timeTask.period ))) );
					//line 128 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					timeTask.next = ( timeTask.start + ( times * timeTask.period ) );
				}
				
			}
			
		}
		
	}
	
	
	public static void back(double time)
	{
		//line 134 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		if (( time >= kha.Scheduler.lastTime )) 
		{
			//line 134 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			return ;
		}
		
		//line 136 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.current = time;
		//line 137 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.lastTime = time;
		//line 138 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.warpTimeTasks(time, kha.Scheduler.outdatedTimeTasks);
		//line 139 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.warpTimeTasks(time, kha.Scheduler.timeTasks);
		//line 141 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		{
			//line 141 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			int _g = 0;
			//line 141 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			haxe.root.Array<kha.TimeTask> _g1 = kha.Scheduler.outdatedTimeTasks;
			//line 141 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			while (( _g < _g1.length ))
			{
				//line 141 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.TimeTask task = _g1.__get(_g);
				//line 141 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				 ++ _g;
				//line 142 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				if (( task.next >= time )) 
				{
					//line 143 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					kha.Scheduler.timeTasksScratchpad.push(task);
				}
				
			}
			
		}
		
		//line 146 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		{
			//line 146 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			int _g2 = 0;
			//line 146 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			haxe.root.Array<kha.TimeTask> _g11 = kha.Scheduler.timeTasksScratchpad;
			//line 146 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			while (( _g2 < _g11.length ))
			{
				//line 146 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.TimeTask task1 = _g11.__get(_g2);
				//line 146 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				 ++ _g2;
				//line 147 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.Scheduler.outdatedTimeTasks.remove(task1);
			}
			
		}
		
		//line 149 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		{
			//line 149 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			int _g3 = 0;
			//line 149 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			haxe.root.Array<kha.TimeTask> _g12 = kha.Scheduler.timeTasksScratchpad;
			//line 149 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			while (( _g3 < _g12.length ))
			{
				//line 149 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.TimeTask task2 = _g12.__get(_g3);
				//line 149 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				 ++ _g3;
				//line 150 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.Scheduler.insertSorted(kha.Scheduler.timeTasks, task2);
			}
			
		}
		
		//line 152 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		while (( kha.Scheduler.timeTasksScratchpad.length > 0 ))
		{
			//line 153 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			kha.Scheduler.timeTasksScratchpad.remove(kha.Scheduler.timeTasksScratchpad.__get(0));
		}
		
		//line 156 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		{
			//line 156 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			int _g4 = 0;
			//line 156 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			haxe.root.Array<kha.TimeTask> _g13 = kha.Scheduler.outdatedTimeTasks;
			//line 156 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			while (( _g4 < _g13.length ))
			{
				//line 156 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.TimeTask task3 = _g13.__get(_g4);
				//line 156 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				 ++ _g4;
				//line 157 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				if (( task3.next < ( time - 1.0 ) )) 
				{
					//line 158 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					kha.Scheduler.timeTasksScratchpad.push(task3);
				}
				
			}
			
		}
		
		//line 161 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		{
			//line 161 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			int _g5 = 0;
			//line 161 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			haxe.root.Array<kha.TimeTask> _g14 = kha.Scheduler.timeTasksScratchpad;
			//line 161 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			while (( _g5 < _g14.length ))
			{
				//line 161 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.TimeTask task4 = _g14.__get(_g5);
				//line 161 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				 ++ _g5;
				//line 162 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.Scheduler.outdatedTimeTasks.remove(task4);
			}
			
		}
		
		//line 164 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		while (( kha.Scheduler.timeTasksScratchpad.length > 0 ))
		{
			//line 165 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			kha.Scheduler.timeTasksScratchpad.remove(kha.Scheduler.timeTasksScratchpad.__get(0));
		}
		
	}
	
	
	public static void executeFrame()
	{
		//line 170 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		double now = kha.Scheduler.realTime();
		//line 171 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		double delta = ( now - kha.Scheduler.lastTime );
		//line 173 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		double frameEnd = kha.Scheduler.current;
		//line 175 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		if (( delta < 0 )) 
		{
			//line 176 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			return ;
		}
		
		//line 181 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		if (( delta > kha.Scheduler.maxframetime )) 
		{
			//line 182 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			kha.Scheduler.startTime += ( delta - kha.Scheduler.maxframetime );
			//line 183 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			delta = kha.Scheduler.maxframetime;
			//line 184 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			frameEnd += delta;
		}
		else
		{
			//line 187 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			if (kha.Scheduler.vsync) 
			{
				//line 190 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				double realdif = kha.Scheduler.onedifhz;
				//line 191 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				while (( realdif < ( delta - kha.Scheduler.onedifhz ) ))
				{
					//line 192 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					realdif += kha.Scheduler.onedifhz;
				}
				
				//line 195 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				delta = realdif;
				//line 196 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				{
					//line 196 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					int _g1 = 0;
					//line 196 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					int _g = ( kha.Scheduler.DIF_COUNT - 2 );
					//line 196 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					while (( _g1 < _g ))
					{
						//line 196 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
						int i = _g1++;
						//line 197 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
						delta += ((double) (haxe.lang.Runtime.toDouble(kha.Scheduler.deltas.__get(i))) );
						//line 198 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
						kha.Scheduler.deltas.__set(i, ((double) (haxe.lang.Runtime.toDouble(kha.Scheduler.deltas.__get(( i + 1 )))) ));
					}
					
				}
				
				//line 200 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				delta += ((double) (haxe.lang.Runtime.toDouble(kha.Scheduler.deltas.__get(( kha.Scheduler.DIF_COUNT - 2 )))) );
				//line 201 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				delta /= ((double) (kha.Scheduler.DIF_COUNT) );
				//line 202 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.Scheduler.deltas.__set(( kha.Scheduler.DIF_COUNT - 2 ), realdif);
				//line 204 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				frameEnd += delta;
			}
			else
			{
				//line 207 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				{
					//line 207 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					int _g11 = 0;
					//line 207 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					int _g2 = ( kha.Scheduler.DIF_COUNT - 1 );
					//line 207 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					while (( _g11 < _g2 ))
					{
						//line 207 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
						int i1 = _g11++;
						//line 208 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
						kha.Scheduler.deltas.__set(i1, ((double) (haxe.lang.Runtime.toDouble(kha.Scheduler.deltas.__get(( i1 + 1 )))) ));
					}
					
				}
				
				//line 210 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.Scheduler.deltas.__set(( kha.Scheduler.DIF_COUNT - 1 ), delta);
				//line 212 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				double next = ((double) (0) );
				//line 213 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				{
					//line 213 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					int _g12 = 0;
					//line 213 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					int _g3 = kha.Scheduler.DIF_COUNT;
					//line 213 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					while (( _g12 < _g3 ))
					{
						//line 213 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
						int i2 = _g12++;
						//line 214 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
						next += ((double) (haxe.lang.Runtime.toDouble(kha.Scheduler.deltas.__get(i2))) );
					}
					
				}
				
				//line 216 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				next /= ((double) (kha.Scheduler.DIF_COUNT) );
				//line 221 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				frameEnd += next;
			}
			
		}
		
		//line 225 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.lastTime = frameEnd;
		//line 226 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		if ( ! (kha.Scheduler.stopped) ) 
		{
			//line 227 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			kha.Scheduler.current = frameEnd;
		}
		
		//line 231 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		{
			//line 231 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			int _g4 = 0;
			//line 231 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			haxe.root.Array<kha.TimeTask> _g13 = kha.Scheduler.pausedTimeTasks;
			//line 231 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			while (( _g4 < _g13.length ))
			{
				//line 231 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.TimeTask pausedTask = _g13.__get(_g4);
				//line 231 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				 ++ _g4;
				//line 232 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				pausedTask.next += delta;
			}
			
		}
		
		//line 235 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		if (kha.Scheduler.stopped) 
		{
			//line 237 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			int _g5 = 0;
			//line 237 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			haxe.root.Array<kha.TimeTask> _g14 = kha.Scheduler.timeTasks;
			//line 237 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			while (( _g5 < _g14.length ))
			{
				//line 237 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.TimeTask timeTask = _g14.__get(_g5);
				//line 237 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				 ++ _g5;
				//line 238 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				timeTask.next += delta;
			}
			
		}
		
		//line 242 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		while (( kha.Scheduler.timeTasks.length > 0 ))
		{
			//line 243 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			kha.Scheduler.activeTimeTask = kha.Scheduler.timeTasks.__get(0);
			//line 245 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			if (( kha.Scheduler.activeTimeTask.next <= frameEnd )) 
			{
				//line 246 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.Scheduler.activeTimeTask.next += kha.Scheduler.activeTimeTask.period;
				//line 247 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.Scheduler.timeTasks.remove(kha.Scheduler.activeTimeTask);
				//line 249 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				if (( kha.Scheduler.activeTimeTask.active && haxe.lang.Runtime.toBool(kha.Scheduler.activeTimeTask.task.__hx_invoke0_o()) )) 
				{
					//line 250 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					if (( ( kha.Scheduler.activeTimeTask.period > 0 ) && (( ( kha.Scheduler.activeTimeTask.duration == 0 ) || ( kha.Scheduler.activeTimeTask.duration >= ( kha.Scheduler.activeTimeTask.start + kha.Scheduler.activeTimeTask.next ) ) )) )) 
					{
						//line 251 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
						kha.Scheduler.insertSorted(kha.Scheduler.timeTasks, kha.Scheduler.activeTimeTask);
					}
					else
					{
						//line 254 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
						kha.Scheduler.archiveTimeTask(kha.Scheduler.activeTimeTask, frameEnd);
					}
					
				}
				else
				{
					//line 258 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					kha.Scheduler.activeTimeTask.active = false;
					//line 259 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					kha.Scheduler.archiveTimeTask(kha.Scheduler.activeTimeTask, frameEnd);
				}
				
			}
			else
			{
				//line 263 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				break;
			}
			
		}
		
		//line 266 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.activeTimeTask = null;
		//line 268 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.sortFrameTasks();
		//line 269 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		{
			//line 269 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			int _g6 = 0;
			//line 269 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			haxe.root.Array<kha.FrameTask> _g15 = kha.Scheduler.frameTasks;
			//line 269 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			while (( _g6 < _g15.length ))
			{
				//line 269 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.FrameTask frameTask = _g15.__get(_g6);
				//line 269 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				 ++ _g6;
				//line 270 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				if (( (  ! (kha.Scheduler.stopped)  &&  ! (frameTask.paused)  ) && frameTask.active )) 
				{
					//line 271 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					if ( ! (haxe.lang.Runtime.toBool(frameTask.task.__hx_invoke0_o())) ) 
					{
						//line 271 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
						frameTask.active = false;
					}
					
				}
				
			}
			
		}
		
		//line 275 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		{
			//line 275 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			int _g7 = 0;
			//line 275 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			haxe.root.Array<kha.FrameTask> _g16 = kha.Scheduler.frameTasks;
			//line 275 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			while (( _g7 < _g16.length ))
			{
				//line 275 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.FrameTask frameTask1 = _g16.__get(_g7);
				//line 275 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				 ++ _g7;
				//line 276 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				if ( ! (frameTask1.active) ) 
				{
					//line 277 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					kha.Scheduler.toDeleteFrame.push(frameTask1);
				}
				
			}
			
		}
		
		//line 281 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		while (( kha.Scheduler.toDeleteFrame.length > 0 ))
		{
			//line 282 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			kha.Scheduler.frameTasks.remove(((kha.FrameTask) (kha.Scheduler.toDeleteFrame.pop()) ));
		}
		
	}
	
	
	public static void archiveTimeTask(kha.TimeTask timeTask, double frameEnd)
	{
	}
	
	
	public static double time()
	{
		//line 295 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		return kha.Scheduler.current;
	}
	
	
	public static double realTime()
	{
		//line 299 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		return ( kha.System.get_time() - kha.Scheduler.startTime );
	}
	
	
	public static void resetTime()
	{
		//line 303 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		double now = kha.System.get_time();
		//line 304 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		double dif = ( now - kha.Scheduler.startTime );
		//line 305 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.startTime = now;
		//line 306 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		{
			//line 306 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			int _g = 0;
			//line 306 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			haxe.root.Array<kha.TimeTask> _g1 = kha.Scheduler.timeTasks;
			//line 306 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			while (( _g < _g1.length ))
			{
				//line 306 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.TimeTask timeTask = _g1.__get(_g);
				//line 306 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				 ++ _g;
				//line 307 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				timeTask.start -= dif;
				//line 308 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				timeTask.next -= dif;
			}
			
		}
		
		//line 310 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		{
			//line 310 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			int _g11 = 0;
			//line 310 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			int _g2 = kha.Scheduler.DIF_COUNT;
			//line 310 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			while (( _g11 < _g2 ))
			{
				//line 310 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				int i = _g11++;
				//line 310 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.Scheduler.deltas.__set(i, 0);
			}
			
		}
		
		//line 311 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.current = ((double) (0) );
		//line 312 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.lastTime = ((double) (0) );
	}
	
	
	public static int addBreakableFrameTask(haxe.lang.Function task, int priority)
	{
		//line 316 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.frameTasks.push(new kha.FrameTask(task, priority,  ++ kha.Scheduler.currentFrameTaskId));
		//line 317 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.frame_tasks_sorted = false;
		//line 318 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		return kha.Scheduler.currentFrameTaskId;
	}
	
	
	public static int addFrameTask(haxe.lang.Function task, int priority)
	{
		//line 322 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		return kha.Scheduler.addBreakableFrameTask(new kha.Scheduler_addFrameTask_322__Fun(task), priority);
	}
	
	
	public static void pauseFrameTask(int id, boolean paused)
	{
		//line 326 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		int _g = 0;
		//line 326 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		haxe.root.Array<kha.FrameTask> _g1 = kha.Scheduler.frameTasks;
		//line 326 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		while (( _g < _g1.length ))
		{
			//line 326 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			kha.FrameTask frameTask = _g1.__get(_g);
			//line 326 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			 ++ _g;
			//line 327 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			if (( frameTask.id == id )) 
			{
				//line 328 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				frameTask.paused = paused;
				//line 329 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				break;
			}
			
		}
		
	}
	
	
	public static void removeFrameTask(int id)
	{
		//line 335 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		int _g = 0;
		//line 335 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		haxe.root.Array<kha.FrameTask> _g1 = kha.Scheduler.frameTasks;
		//line 335 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		while (( _g < _g1.length ))
		{
			//line 335 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			kha.FrameTask frameTask = _g1.__get(_g);
			//line 335 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			 ++ _g;
			//line 336 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			if (( frameTask.id == id )) 
			{
				//line 337 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				frameTask.active = false;
				//line 338 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				break;
			}
			
		}
		
	}
	
	
	public static int generateGroupId()
	{
		//line 344 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		return  ++ kha.Scheduler.currentGroupId;
	}
	
	
	public static int addBreakableTimeTaskToGroup(int groupId, haxe.lang.Function task, double start, java.lang.Object period, java.lang.Object duration)
	{
		//line 347 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		double __temp_duration72 = ( (haxe.lang.Runtime.eq(duration, null)) ? (((double) (0) )) : (((double) (haxe.lang.Runtime.toDouble(duration)) )) );
		//line 347 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		double __temp_period71 = ( (haxe.lang.Runtime.eq(period, null)) ? (((double) (0) )) : (((double) (haxe.lang.Runtime.toDouble(period)) )) );
		//line 348 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.TimeTask t = new kha.TimeTask();
		//line 349 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		t.active = true;
		//line 350 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		t.task = task;
		//line 351 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		t.id =  ++ kha.Scheduler.currentTimeTaskId;
		//line 352 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		t.groupId = groupId;
		//line 354 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		t.start = ( kha.Scheduler.current + start );
		//line 355 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		t.period = ((double) (0) );
		//line 356 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		if (( __temp_period71 != 0 )) 
		{
			//line 356 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			t.period = __temp_period71;
		}
		
		//line 357 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		t.duration = ((double) (0) );
		//line 358 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		if (( __temp_duration72 != 0 )) 
		{
			//line 358 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			t.duration = ( t.start + __temp_duration72 );
		}
		
		//line 360 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		t.next = t.start;
		//line 361 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.insertSorted(kha.Scheduler.timeTasks, t);
		//line 362 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		return t.id;
	}
	
	
	public static int addTimeTaskToGroup(int groupId, haxe.lang.Function task, double start, java.lang.Object period, java.lang.Object duration)
	{
		//line 366 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		double __temp_duration74 = ( (haxe.lang.Runtime.eq(duration, null)) ? (((double) (0) )) : (((double) (haxe.lang.Runtime.toDouble(duration)) )) );
		//line 366 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		double __temp_period73 = ( (haxe.lang.Runtime.eq(period, null)) ? (((double) (0) )) : (((double) (haxe.lang.Runtime.toDouble(period)) )) );
		//line 366 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		return kha.Scheduler.addBreakableTimeTaskToGroup(groupId, new kha.Scheduler_addTimeTaskToGroup_366__Fun(task), start, __temp_period73, __temp_duration74);
	}
	
	
	public static int addBreakableTimeTask(haxe.lang.Function task, double start, java.lang.Object period, java.lang.Object duration)
	{
		//line 370 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		double __temp_duration76 = ( (haxe.lang.Runtime.eq(duration, null)) ? (((double) (0) )) : (((double) (haxe.lang.Runtime.toDouble(duration)) )) );
		//line 370 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		double __temp_period75 = ( (haxe.lang.Runtime.eq(period, null)) ? (((double) (0) )) : (((double) (haxe.lang.Runtime.toDouble(period)) )) );
		//line 370 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		return kha.Scheduler.addBreakableTimeTaskToGroup(0, task, start, __temp_period75, __temp_duration76);
	}
	
	
	public static int addTimeTask(haxe.lang.Function task, double start, java.lang.Object period, java.lang.Object duration)
	{
		//line 374 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		double __temp_duration78 = ( (haxe.lang.Runtime.eq(duration, null)) ? (((double) (0) )) : (((double) (haxe.lang.Runtime.toDouble(duration)) )) );
		//line 374 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		double __temp_period77 = ( (haxe.lang.Runtime.eq(period, null)) ? (((double) (0) )) : (((double) (haxe.lang.Runtime.toDouble(period)) )) );
		//line 374 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		return kha.Scheduler.addTimeTaskToGroup(0, task, start, __temp_period77, __temp_duration78);
	}
	
	
	public static kha.TimeTask getTimeTask(int id)
	{
		//line 378 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		boolean tmp = false;
		//line 378 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		boolean tmp1 = ( kha.Scheduler.activeTimeTask != null );
		//line 378 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		if (tmp1) 
		{
			//line 378 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			tmp = ( kha.Scheduler.activeTimeTask.id == id );
		}
		else
		{
			//line 378 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			tmp = false;
		}
		
		//line 378 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		if (tmp) 
		{
			//line 378 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			return kha.Scheduler.activeTimeTask;
		}
		
		//line 379 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		{
			//line 379 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			int _g = 0;
			//line 379 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			haxe.root.Array<kha.TimeTask> _g1 = kha.Scheduler.timeTasks;
			//line 379 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			while (( _g < _g1.length ))
			{
				//line 379 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.TimeTask timeTask = _g1.__get(_g);
				//line 379 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				 ++ _g;
				//line 380 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				if (( timeTask.id == id )) 
				{
					//line 381 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					return timeTask;
				}
				
			}
			
		}
		
		//line 384 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		{
			//line 384 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			int _g2 = 0;
			//line 384 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			haxe.root.Array<kha.TimeTask> _g11 = kha.Scheduler.pausedTimeTasks;
			//line 384 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			while (( _g2 < _g11.length ))
			{
				//line 384 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.TimeTask timeTask1 = _g11.__get(_g2);
				//line 384 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				 ++ _g2;
				//line 385 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				if (( timeTask1.id == id )) 
				{
					//line 386 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					return timeTask1;
				}
				
			}
			
		}
		
		//line 389 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		return null;
	}
	
	
	public static void pauseTimeTask(int id, boolean paused)
	{
		//line 393 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.TimeTask timeTask = kha.Scheduler.getTimeTask(id);
		//line 394 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		boolean tmp = ( timeTask != null );
		//line 394 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		if (tmp) 
		{
			//line 395 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			kha.Scheduler.pauseRunningTimeTask(timeTask, paused);
		}
		
		//line 397 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		boolean tmp1 = false;
		//line 397 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		boolean tmp2 = ( kha.Scheduler.activeTimeTask != null );
		//line 397 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		if (tmp2) 
		{
			//line 397 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			tmp1 = ( kha.Scheduler.activeTimeTask.id == id );
		}
		else
		{
			//line 397 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			tmp1 = false;
		}
		
		//line 397 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		if (tmp1) 
		{
			//line 398 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			kha.Scheduler.activeTimeTask.paused = paused;
		}
		
	}
	
	
	public static void pauseRunningTimeTask(kha.TimeTask timeTask, boolean paused)
	{
		//line 403 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		timeTask.paused = paused;
		//line 404 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		if (paused) 
		{
			//line 405 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			kha.Scheduler.timeTasks.remove(timeTask);
			//line 406 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			kha.Scheduler.pausedTimeTasks.push(timeTask);
		}
		else
		{
			//line 409 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			kha.Scheduler.insertSorted(kha.Scheduler.timeTasks, timeTask);
			//line 410 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			kha.Scheduler.pausedTimeTasks.remove(timeTask);
		}
		
	}
	
	
	public static void pauseTimeTasks(int groupId, boolean paused)
	{
		//line 415 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		{
			//line 415 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			int _g = 0;
			//line 415 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			haxe.root.Array<kha.TimeTask> _g1 = kha.Scheduler.timeTasks;
			//line 415 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			while (( _g < _g1.length ))
			{
				//line 415 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.TimeTask timeTask = _g1.__get(_g);
				//line 415 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				 ++ _g;
				//line 416 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				if (( timeTask.groupId == groupId )) 
				{
					//line 417 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					kha.Scheduler.pauseRunningTimeTask(timeTask, paused);
				}
				
			}
			
		}
		
		//line 420 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		boolean tmp = false;
		//line 420 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		boolean tmp1 = ( kha.Scheduler.activeTimeTask != null );
		//line 420 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		if (tmp1) 
		{
			//line 420 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			tmp = ( kha.Scheduler.activeTimeTask.groupId == groupId );
		}
		else
		{
			//line 420 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			tmp = false;
		}
		
		//line 420 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		if (tmp) 
		{
			//line 421 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			kha.Scheduler.activeTimeTask.paused = paused;
		}
		
	}
	
	
	public static void removeTimeTask(int id)
	{
		//line 426 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.TimeTask timeTask = kha.Scheduler.getTimeTask(id);
		//line 427 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		boolean tmp = ( timeTask != null );
		//line 427 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		if (tmp) 
		{
			//line 428 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			timeTask.active = false;
			//line 429 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			kha.Scheduler.timeTasks.remove(timeTask);
		}
		
	}
	
	
	public static void removeTimeTasks(int groupId)
	{
		//line 434 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		{
			//line 434 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			int _g = 0;
			//line 434 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			haxe.root.Array<kha.TimeTask> _g1 = kha.Scheduler.timeTasks;
			//line 434 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			while (( _g < _g1.length ))
			{
				//line 434 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.TimeTask timeTask = _g1.__get(_g);
				//line 434 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				 ++ _g;
				//line 435 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				if (( timeTask.groupId == groupId )) 
				{
					//line 436 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					timeTask.active = false;
					//line 437 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					kha.Scheduler.timeTasksScratchpad.push(timeTask);
				}
				
			}
			
		}
		
		//line 441 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		{
			//line 441 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			int _g2 = 0;
			//line 441 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			haxe.root.Array<kha.TimeTask> _g11 = kha.Scheduler.timeTasksScratchpad;
			//line 441 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			while (( _g2 < _g11.length ))
			{
				//line 441 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.TimeTask timeTask1 = _g11.__get(_g2);
				//line 441 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				 ++ _g2;
				//line 442 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				kha.Scheduler.timeTasks.remove(timeTask1);
			}
			
		}
		
		//line 444 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		while (( kha.Scheduler.timeTasksScratchpad.length > 0 ))
		{
			//line 445 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			kha.Scheduler.timeTasksScratchpad.remove(kha.Scheduler.timeTasksScratchpad.__get(0));
		}
		
		//line 448 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		boolean tmp = false;
		//line 448 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		boolean tmp1 = ( kha.Scheduler.activeTimeTask != null );
		//line 448 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		if (tmp1) 
		{
			//line 448 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			tmp = ( kha.Scheduler.activeTimeTask.groupId == groupId );
		}
		else
		{
			//line 448 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			tmp = false;
		}
		
		//line 448 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		if (tmp) 
		{
			//line 449 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			kha.Scheduler.activeTimeTask.active = false;
		}
		
	}
	
	
	public static int numTasksInSchedule()
	{
		//line 454 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		return ( kha.Scheduler.timeTasks.length + kha.Scheduler.frameTasks.length );
	}
	
	
	public static void insertSorted(haxe.root.Array<kha.TimeTask> list, kha.TimeTask task)
	{
		//line 458 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		{
			//line 458 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			int _g1 = 0;
			//line 458 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			int _g = list.length;
			//line 458 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			while (( _g1 < _g ))
			{
				//line 458 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				int i = _g1++;
				//line 459 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
				if (( list.__get(i).next > task.next )) 
				{
					//line 460 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					list.insert(i, task);
					//line 461 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
					return ;
				}
				
			}
			
		}
		
		//line 464 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		list.push(task);
	}
	
	
	public static void sortFrameTasks()
	{
		//line 468 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		if (kha.Scheduler.frame_tasks_sorted) 
		{
			//line 468 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
			return ;
		}
		
		//line 469 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.frameTasks.sort(( (( kha.Scheduler_sortFrameTasks_469__Fun.__hx_current != null )) ? (kha.Scheduler_sortFrameTasks_469__Fun.__hx_current) : (kha.Scheduler_sortFrameTasks_469__Fun.__hx_current = ((kha.Scheduler_sortFrameTasks_469__Fun) (new kha.Scheduler_sortFrameTasks_469__Fun()) )) ));
		//line 470 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		kha.Scheduler.frame_tasks_sorted = true;
	}
	
	
	public static java.lang.Object __hx_createEmpty()
	{
		//line 37 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		return new kha.Scheduler(haxe.lang.EmptyObject.EMPTY);
	}
	
	
	public static java.lang.Object __hx_create(haxe.root.Array arr)
	{
		//line 37 "/usr/local/lib/haxe/lib/kha/git/Sources/kha/Scheduler.hx"
		return new kha.Scheduler();
	}
	
	
}


